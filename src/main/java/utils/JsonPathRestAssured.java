package utils;

import io.restassured.path.json.JsonPath;

public class JsonPathRestAssured {

    public static void main(String[] args) {
        JsonPath jsonPath = new JsonPath(json);
        Object o = jsonPath.get("items.find{it.type=='vm'}.resources_statuses.on.collect{it.total_price.toFloat()}.sum().toString()");
        System.out.println(o);
    }

    static final String json = "{\"tariff_plan_id\":\"8768d7af-6fb6-4f3c-97c5-8ffac3349bb1\",\"graph_id\":null,\"items\":[{\"item_id\":\"53dbcb9a-5e33-4421-8917-0b78145ef998\",\"resources\":[],\"resources_statuses\":{\"on\":[{\"label\":\"Жесткий диск для openstack\",\"count\":10.0,\"total_price\":\"0.00080800\",\"price\":\"0.00008080\",\"name\":\"disk_openstack_extra_disks\"},{\"label\":\"Жесткий диск для openstack\",\"count\":30.0,\"total_price\":\"0.00242400\",\"price\":\"0.00008080\",\"name\":\"disk_openstack_boot_disk\"},{\"label\":\"Процессор openstack\",\"count\":2.0,\"total_price\":\"0.00120548\",\"price\":\"0.00060274\",\"name\":\"cpu_openstack\"},{\"label\":\"ОС linux в типе среды DEV для OpenStack\",\"count\":2.0,\"total_price\":\"0.00217872\",\"price\":\"0.00108936\",\"name\":\"os_linux_openstack_dev\"},{\"label\":\"Оперативная память для openstack\",\"count\":4.0,\"total_price\":\"0.00272032\",\"price\":\"0.00068008\",\"name\":\"ram_openstack\"}],\"off\":[{\"label\":\"Жесткий диск для openstack\",\"count\":10.0,\"total_price\":\"0.00080800\",\"price\":\"0.00008080\",\"name\":\"disk_openstack_extra_disks\"},{\"label\":\"Жесткий диск для openstack\",\"count\":30.0,\"total_price\":\"0.00242400\",\"price\":\"0.00008080\",\"name\":\"disk_openstack_boot_disk\"},{\"label\":\"ОС linux в типе среды DEV для OpenStack\",\"count\":2.0,\"total_price\":\"0.00217872\",\"price\":\"0.00108936\",\"name\":\"os_linux_openstack_dev\"}],\"reboot\":[{\"label\":\"Жесткий диск для openstack\",\"count\":10.0,\"total_price\":\"0.00080800\",\"price\":\"0.00008080\",\"name\":\"disk_openstack_extra_disks\"},{\"label\":\"Жесткий диск для openstack\",\"count\":30.0,\"total_price\":\"0.00242400\",\"price\":\"0.00008080\",\"name\":\"disk_openstack_boot_disk\"},{\"label\":\"Процессор openstack\",\"count\":2.0,\"total_price\":\"0.00120548\",\"price\":\"0.00060274\",\"name\":\"cpu_openstack\"},{\"label\":\"ОС linux в типе среды DEV для OpenStack\",\"count\":2.0,\"total_price\":\"0.00217872\",\"price\":\"0.00108936\",\"name\":\"os_linux_openstack_dev\"},{\"label\":\"Оперативная память для openstack\",\"count\":4.0,\"total_price\":\"0.00272032\",\"price\":\"0.00068008\",\"name\":\"ram_openstack\"}]},\"type\":\"vm\",\"status\":\"on\"}],\"total_price\":0.00933652,\"order_price\":0.00933652,\"orders_count\":1,\"original_items\":[{\"type\":\"vm\",\"item_id\":\"53dbcb9a-5e33-4421-8917-0b78145ef998\",\"config\":{\"resource_pool\":{\"name\":\"ct1k1\",\"uuid\":\"ab113d3e-3096-434d-8106-3c45adc00042\",\"domain\":\"Cloud\",\"region\":\"ct1k1\",\"ui_link\":\"https://public-ct1.cloud.vtb.ru\",\"endpoint\":\"https://public-ct1.cloud.vtb.ru:5000\",\"platform\":\"openstack\",\"tenant_prefix\":\"ct1k1\"},\"tenant\":{},\"domain\":\"corp.dev.vtb\",\"ad_integration\":true,\"flavor\":{\"cpus\":2,\"name\":\"c2m4\",\"uuid\":\"3dfab004-286c-4f39-9932-baf865756a23\",\"memory\":4},\"image\":{\"uuid\":\"76266cb5-7d7d-4b23-a4cb-267b5db9d49a\",\"name\":\"tpl_linux_rhel_7.9_x86_64_en\",\"os\":{\"type\":\"linux\",\"vendor\":\"ibm\",\"version\":\"7.9\",\"architecture\":\"x86_64\",\"distribution\":\"rhel\",\"localization\":\"en\"},\"size\":30},\"boot_disk\":{\"size\":30},\"extra_disks\":[{\"size\":10}],\"default_nic\":{\"net_segment\":\"dev-srv-app\"},\"extra_nics\":[],\"on_support\":false,\"os_version\":\"7.9\",\"environment_type\":\"DEV\",\"environment\":\"DEV\"},\"data\":{\"config\":{\"resource_pool\":{\"name\":\"ct1k1\",\"uuid\":\"ab113d3e-3096-434d-8106-3c45adc00042\",\"domain\":\"Cloud\",\"region\":\"ct1k1\",\"ui_link\":\"https://public-ct1.cloud.vtb.ru\",\"endpoint\":\"https://public-ct1.cloud.vtb.ru:5000\",\"platform\":\"openstack\",\"tenant_prefix\":\"ct1k1\"},\"tenant\":{},\"domain\":\"corp.dev.vtb\",\"ad_integration\":true,\"flavor\":{\"cpus\":2,\"name\":\"c2m4\",\"uuid\":\"3dfab004-286c-4f39-9932-baf865756a23\",\"memory\":4},\"image\":{\"uuid\":\"76266cb5-7d7d-4b23-a4cb-267b5db9d49a\",\"name\":\"tpl_linux_rhel_7.9_x86_64_en\",\"os\":{\"type\":\"linux\",\"vendor\":\"ibm\",\"version\":\"7.9\",\"architecture\":\"x86_64\",\"distribution\":\"rhel\",\"localization\":\"en\"},\"size\":30},\"boot_disk\":{\"size\":30},\"extra_disks\":[{\"size\":10}],\"default_nic\":{\"net_segment\":\"dev-srv-app\"},\"extra_nics\":[],\"on_support\":false,\"os_version\":\"7.9\",\"environment_type\":\"DEV\",\"environment\":\"DEV\"},\"state\":\"on\",\"provider\":\"openstack\"},\"update_dt\":null}]}";
}
