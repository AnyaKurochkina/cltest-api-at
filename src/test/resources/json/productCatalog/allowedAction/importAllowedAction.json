{
  "model_name": "AllowedAction",
  "AllowedAction": {
    "id": 501,
    "context_restrictions": [],
    "event_type_provider": [
      {
        "event_type": "s3",
        "event_provider": "s3"
      }
    ],
    "name": "import_allowed_action_test_api",
    "title": "import_allowed_action_test_api",
    "description": "",
    "item_restriction": null,
    "action_id": "2a6558be-6006-45d5-9a06-560a6b6ab076",
    "action": "2a6558be-6006-45d5-9a06-560a6b6ab076"
  },
  "rel_foreign_models": {
    "action": {
      "model_name": "Action",
      "Action": {
        "graph_id": "80307366-fa38-4a2a-a78a-91f896d8b284",
        "multiple": false,
        "priority": 0,
        "extra_data": {},
        "graph_version": "",
        "data_config_key": null,
        "data_config_path": null,
        "item_restriction": null,
        "skip_item_change": false,
        "skip_reservation": false,
        "data_config_fields": [],
        "skip_on_prebilling": false,
        "location_restriction": "",
        "graph_version_pattern": "",
        "skip_validate_checker": false,
        "auto_removing_if_failed": false,
        "available_without_money": false,
        "skip_restriction_service": false,
        "ignore_restriction_service": false,
        "skip_request_resource_pools": false,
        "available_with_cost_reduction": false,
        "current_version": "",
        "context_restrictions": [],
        "event_type_provider": [
          {
            "event_type": "vm",
            "event_provider": "debezium"
          }
        ],
        "name": "dbzm_test",
        "title": "dbzm_test",
        "description": "",
        "number": 50,
        "is_safe": false,
        "is_delayable": false,
        "type": "",
        "allowed_groups": [],
        "restricted_groups": [],
        "required_order_statuses": [
          "success"
        ],
        "required_item_statuses": [
          "on"
        ],
        "allowed_developers": [],
        "restricted_developers": [],
        "version_arr": [
          1,
          0,
          0
        ],
        "icon_store_id": null,
        "icon_store": null
      },
      "rel_foreign_models": {
        "graph": {
          "model_name": "Graph",
          "Graph": {
            "author": "Dmitriy A Pyryakov",
            "output": {},
            "ui_schema": {
              "db_name": {
                "ui:widget": "ConfigUniqNameWidget",
                "ui:options": {
                  "key": "db_name",
                  "path": "dbs",
                  "validationError": "\u0422\u0430\u043a\u0430\u044f \u0431\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442!"
                }
              },
              "ui:order": [
                "db_name",
                "db_admin_pass",
                "conn_limit",
                "connection_limit_passed"
              ],
              "db_admin_pass": {
                "ui:widget": "PasswordGeneratorWidget",
                "ui:readonly": false
              },
              "connection_limit_passed": {
                "ui:widget": "ConnectionLimitCheckerWidget",
                "ui:options": {
                  "dbsPath": "item.data.config.dbs",
                  "hideText": false,
                  "maxConnectionPath": "item.data.config.configuration.max_connections",
                  "connectionLimitKey": "connection_limit",
                  "connectionLimitThreshold": 5
                }
              }
            },
            "json_schema": {
              "type": "object",
              "required": [
                "db_name",
                "db_admin_pass",
                "conn_limit"
              ],
              "properties": {
                "db_name": {
                  "type": "string",
                  "title": "\u0418\u043c\u044f \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445",
                  "pattern": "^(?!(?:[p|P][o|O][s|S][t|T][g|G][r|R][e|E][s|S]|[t|T][e|E][m|M][p|P][l|L][a|A][t|T][e|E].*)$)[a-z0-9_]{1,63}$",
                  "description": "\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0435 \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b \u043e\u0442 \u00aba\u00bb \u0434\u043e \u00abz\u00bb, \u0447\u0438\u0441\u043b\u043e\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438 \u0441\u0438\u043c\u0432\u043e\u043b \u00ab_\u00bb. \u0414\u043b\u0438\u043d\u0430 \u0438\u043c\u0435\u043d\u0438 \u043e\u0442 1 \u0434\u043e 63 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"
                },
                "conn_limit": {
                  "type": "integer",
                  "title": "\u041f\u0440\u0435\u0434\u0435\u043b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439",
                  "default": 20,
                  "maximum": 50,
                  "minimum": 10
                },
                "db_admin_pass": {
                  "type": "string",
                  "title": "\u041f\u0430\u0440\u043e\u043b\u044c \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u0411\u0414",
                  "pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9\\._-]{16,63}$",
                  "description": "\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0446\u0438\u0444\u0440\u044b, \u043f\u0440\u043e\u043f\u0438\u0441\u043d\u044b\u0435 \u0438 \u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0435 \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b. \u041e\u0442 16 \u0434\u043e 63 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."
                },
                "connection_limit_passed": {
                  "type": "boolean",
                  "title": "Connection limit passed"
                }
              }
            },
            "static_data": {
              "credential": "VTB.Cloud-DEV",
              "job_template": "postgresql_create_db",
              "data_template": "{% set inventory = {'all': {'hosts': {}, 'vars': {}}} %}{% set machines = items.values() | selectattr('type', 'equalto', 'vm') | list %}{% for machine in machines %}{% set _ = inventory.all.hosts.update({machine.data.config.hostname + '.' + machine.data.config.domain: {'ansible_host': machine.data.config.default_v4_address}}) %}{% endfor %}{% set _ = inventory.all.vars.update({'db_name': db_name, 'db_admin_pass': db_admin_pass,'conn_limit':conn_limit, 'config': config}) %}{{ {'inventory': inventory, 'net_segment': (machines | first).data.config.default_nic.net_segment} | tojson }}",
              "resolved_items": true
            },
            "modifications": [],
            "printed_output": {},
            "lock_order_on_error": false,
            "damage_order_on_error": false,
            "current_version": "",
            "name": "create_db",
            "title": "\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 PostgreSQL",
            "description": "",
            "type": "action",
            "allowed_developers": [],
            "restricted_developers": [],
            "default_item": {},
            "version_arr": [
              1,
              0,
              73
            ]
          },
          "rel_foreign_models": {},
          "rel_revers_models": {
            "nodes": [
              {
                "model_name": "Node",
                "Node": {
                  "hold": false,
                  "name": "gen_action_data",
                  "color": "",
                  "count": null,
                  "input": {
                    "items": "resolved_items",
                    "config": "resolved_items[item_id]['data']['config']",
                    "db_name": "data['db_name']",
                    "template": "data_template",
                    "from_json": "True",
                    "conn_limit": "data['conn_limit']",
                    "db_admin_pass": "data['db_admin_pass']"
                  },
                  "number": 10,
                  "output": {
                    "formatted": "action_data"
                  },
                  "depends": [],
                  "timeout": 7200,
                  "coords_x": 140.0,
                  "coords_y": 68.0,
                  "for_each": "",
                  "icon_url": "",
                  "priority": null,
                  "condition": "",
                  "log_level": null,
                  "extra_data": null,
                  "description": "\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u00a0\u0434\u0430\u043d\u043d\u044b\u0435",
                  "subgraph_id": null,
                  "template_id": 40,
                  "icon_store_id": null,
                  "is_sequential": false,
                  "on_prebilling": false,
                  "printed_output": {},
                  "run_on_rollback": false,
                  "subgraph_version": "",
                  "template_version": "",
                  "lock_order_on_error": false,
                  "not_damage_on_error": false,
                  "damage_order_on_error": false,
                  "subgraph_version_pattern": "",
                  "template_version_pattern": "",
                  "subgraph_version_calculated": "",
                  "template_version_calculated": "1.0.3"
                },
                "rel_foreign_models": {
                  "template": {
                    "model_name": "Template",
                    "Template": {
                      "run": "internal",
                      "input": {
                        "template": {
                          "required": true
                        },
                        "from_json": {}
                      },
                      "output": {
                        "formatted": {}
                      },
                      "timeout": 120,
                      "priority": 0,
                      "rollback": null,
                      "log_level": "full",
                      "printed_output": [
                        {
                          "type": "text",
                          "data_path": "data",
                          "node_state": "completed"
                        },
                        {
                          "type": "text",
                          "data_path": "data.formatted",
                          "node_state": "completed"
                        }
                      ],
                      "additional_input": true,
                      "additional_output": false,
                      "log_can_be_overridden": true,
                      "priority_can_be_overridden": false,
                      "printed_output_can_be_overridden": true,
                      "id": 40,
                      "current_version": "",
                      "coords_x": 0.0,
                      "coords_y": 0.0,
                      "extra_data": null,
                      "color": "",
                      "name": "jinja2_format",
                      "title": "jinja2_format",
                      "description": "\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c jinja2 \u0448\u0430\u0431\u043b\u043e\u043d\u0430",
                      "type": "system_nodes",
                      "allowed_groups": [],
                      "restricted_groups": [],
                      "version_arr": [
                        1,
                        0,
                        3
                      ],
                      "icon_store_id": null,
                      "icon_store": null
                    },
                    "rel_foreign_models": {}
                  }
                }
              },
              {
                "model_name": "Node",
                "Node": {
                  "hold": false,
                  "name": "create_db",
                  "color": "",
                  "count": null,
                  "input": {
                    "inventory": "action_data['inventory']",
                    "credentials": "[credential]",
                    "net_segment": "action_data['net_segment']",
                    "job_template": "job_template",
                    "environment_type": "environment_type"
                  },
                  "number": 20,
                  "output": {
                    "config": "updated_config"
                  },
                  "depends": [
                    "gen_action_data"
                  ],
                  "timeout": 7200,
                  "coords_x": 140.0,
                  "coords_y": 254.0,
                  "for_each": "",
                  "icon_url": "",
                  "priority": null,
                  "condition": "",
                  "log_level": null,
                  "extra_data": null,
                  "description": "\u0441\u043e\u0437\u0434\u0430\u0435\u043c \u0411\u0414",
                  "subgraph_id": null,
                  "template_id": 43,
                  "icon_store_id": null,
                  "is_sequential": false,
                  "on_prebilling": false,
                  "printed_output": {},
                  "run_on_rollback": false,
                  "subgraph_version": "",
                  "template_version": "",
                  "lock_order_on_error": false,
                  "not_damage_on_error": false,
                  "damage_order_on_error": false,
                  "subgraph_version_pattern": "",
                  "template_version_pattern": "",
                  "subgraph_version_calculated": "",
                  "template_version_calculated": "1.0.2"
                },
                "rel_foreign_models": {
                  "template": {
                    "model_name": "Template",
                    "Template": {
                      "run": "awx:cmd",
                      "input": {
                        "inventory": {},
                        "credential": {},
                        "extra_vars": {},
                        "net_segment": {},
                        "job_template": {}
                      },
                      "output": {
                        "config": {},
                        "item_id": {}
                      },
                      "timeout": 7200,
                      "priority": 0,
                      "rollback": null,
                      "log_level": null,
                      "printed_output": {},
                      "additional_input": true,
                      "additional_output": true,
                      "log_can_be_overridden": false,
                      "priority_can_be_overridden": false,
                      "printed_output_can_be_overridden": true,
                      "id": 43,
                      "current_version": "",
                      "coords_x": 0.0,
                      "coords_y": 0.0,
                      "extra_data": null,
                      "color": "",
                      "name": "ansible_awx",
                      "title": "ansible_awx",
                      "description": "\u0437\u0430\u043f\u0443\u0441\u043a job_template \u0432 Ansible AWX",
                      "type": "rpc",
                      "allowed_groups": [],
                      "restricted_groups": [],
                      "version_arr": [
                        1,
                        0,
                        2
                      ],
                      "icon_store_id": null,
                      "icon_store": null
                    },
                    "rel_foreign_models": {}
                  }
                }
              },
              {
                "model_name": "Node",
                "Node": {
                  "hold": false,
                  "name": "update_postgresql_config",
                  "color": "",
                  "count": null,
                  "input": {
                    "data": "{**resolved_items[item_id]['data']['config'], **updated_config}",
                    "type": "enums.EventType.APP.value",
                    "item_id": "item_id",
                    "subtype": "enums.EventSubType.CONFIG.value"
                  },
                  "number": 30,
                  "output": {},
                  "depends": [
                    "create_db"
                  ],
                  "timeout": 7200,
                  "coords_x": 140.0,
                  "coords_y": 440.0,
                  "for_each": "",
                  "icon_url": "",
                  "priority": null,
                  "condition": "",
                  "log_level": null,
                  "extra_data": null,
                  "description": "\u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0411\u0414 \u0432 \u0441\u0435\u0440\u0432\u0438\u0441 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439",
                  "subgraph_id": null,
                  "template_id": 45,
                  "icon_store_id": null,
                  "is_sequential": false,
                  "on_prebilling": false,
                  "printed_output": {},
                  "run_on_rollback": false,
                  "subgraph_version": "",
                  "template_version": "",
                  "lock_order_on_error": false,
                  "not_damage_on_error": false,
                  "damage_order_on_error": false,
                  "subgraph_version_pattern": "",
                  "template_version_pattern": "",
                  "subgraph_version_calculated": "",
                  "template_version_calculated": "1.0.2"
                },
                "rel_foreign_models": {
                  "template": {
                    "model_name": "Template",
                    "Template": {
                      "run": "internal",
                      "input": {
                        "data": {},
                        "type": {},
                        "status": {},
                        "item_id": {},
                        "subtype": {}
                      },
                      "output": {
                        "data": {}
                      },
                      "timeout": 120,
                      "priority": 0,
                      "rollback": null,
                      "log_level": "",
                      "printed_output": {},
                      "additional_input": true,
                      "additional_output": true,
                      "log_can_be_overridden": true,
                      "priority_can_be_overridden": false,
                      "printed_output_can_be_overridden": false,
                      "id": 45,
                      "current_version": "",
                      "coords_x": 0.0,
                      "coords_y": 0.0,
                      "extra_data": null,
                      "color": "",
                      "name": "add_event",
                      "title": "add_event",
                      "description": "\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 Event \u0432 \u0441\u0435\u0440\u0432\u0438\u0441 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439",
                      "type": "system_nodes",
                      "allowed_groups": [],
                      "restricted_groups": [],
                      "version_arr": [
                        1,
                        0,
                        2
                      ],
                      "icon_store_id": null,
                      "icon_store": null
                    },
                    "rel_foreign_models": {}
                  }
                }
              }
            ]
          }
        }
      }
    }
  },
  "dump_version": 5.0,
  "dump_date": "2023-07-06 21:39:21",
  "is_pinned_versions": false
}